(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b105740"],{1169:function(e,t,r){var a=r("2d95");e.exports=Array.isArray||function(e){return"Array"==a(e)}},"11e9":function(e,t,r){var a=r("52a7"),n=r("4630"),o=r("6821"),i=r("6a99"),l=r("69a8"),s=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=o(e),t=i(t,!0),s)try{return c(e,t)}catch(r){}if(l(e,t))return n(!a.f.call(e,t),e[t])}},"1af6":function(e,t,r){var a=r("63b6");a(a.S,"Array",{isArray:r("9003")})},"37c8":function(e,t,r){t.f=r("2b4c")},"3a72":function(e,t,r){var a=r("7726"),n=r("8378"),o=r("2d00"),i=r("37c8"),l=r("86cc").f;e.exports=function(e){var t=n.Symbol||(n.Symbol=o?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||l(t,e,{value:i.f(e)})}},"469f":function(e,t,r){r("6c1c"),r("1654"),e.exports=r("7d7b")},"54a1":function(e,t,r){r("6c1c"),r("1654"),e.exports=r("95d5")},"5d73":function(e,t,r){e.exports=r("469f")},"67ab":function(e,t,r){var a=r("ca5a")("meta"),n=r("d3f4"),o=r("69a8"),i=r("86cc").f,l=0,s=Object.isExtensible||function(){return!0},c=!r("79e5")((function(){return s(Object.preventExtensions({}))})),u=function(e){i(e,a,{value:{i:"O"+ ++l,w:{}}})},f=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,a)){if(!s(e))return"F";if(!t)return"E";u(e)}return e[a].i},p=function(e,t){if(!o(e,a)){if(!s(e))return!0;if(!t)return!1;u(e)}return e[a].w},m=function(e){return c&&h.NEED&&s(e)&&!o(e,a)&&u(e),e},h=e.exports={KEY:a,NEED:!1,fastKey:f,getWeak:p,onFreeze:m}},"7bbc":function(e,t,r){var a=r("6821"),n=r("9093").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return n(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==o.call(e)?l(e):n(a(e))}},"7d7b":function(e,t,r){var a=r("e4ae"),n=r("7cd6");e.exports=r("584a").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},"7d7e":function(e,t,r){"use strict";var a=r("d1e6"),n=r.n(a);n.a},"8a81":function(e,t,r){"use strict";var a=r("7726"),n=r("69a8"),o=r("9e1e"),i=r("5ca1"),l=r("2aba"),s=r("67ab").KEY,c=r("79e5"),u=r("5537"),f=r("7f20"),p=r("ca5a"),m=r("2b4c"),h=r("37c8"),d=r("3a72"),v=r("d4c0"),b=r("1169"),g=r("cb7c"),w=r("d3f4"),y=r("4bf8"),_=r("6821"),k=r("6a99"),x=r("4630"),F=r("2aeb"),S=r("7bbc"),O=r("11e9"),R=r("2621"),C=r("86cc"),j=r("0d58"),$=O.f,U=C.f,B=S.f,z=a.Symbol,D=a.JSON,E=D&&D.stringify,L="prototype",N=m("_hidden"),A=m("toPrimitive"),T={}.propertyIsEnumerable,q=u("symbol-registry"),P=u("symbols"),I=u("op-symbols"),J=Object[L],V="function"==typeof z&&!!R.f,M=a.QObject,W=!M||!M[L]||!M[L].findChild,K=o&&c((function(){return 7!=F(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(e,t,r){var a=$(J,t);a&&delete J[t],U(e,t,r),a&&e!==J&&U(J,t,a)}:U,H=function(e){var t=P[e]=F(z[L]);return t._k=e,t},Y=V&&"symbol"==typeof z.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof z},G=function(e,t,r){return e===J&&G(I,t,r),g(e),t=k(t,!0),g(r),n(P,t)?(r.enumerable?(n(e,N)&&e[N][t]&&(e[N][t]=!1),r=F(r,{enumerable:x(0,!1)})):(n(e,N)||U(e,N,x(1,{})),e[N][t]=!0),K(e,t,r)):U(e,t,r)},Q=function(e,t){g(e);var r,a=v(t=_(t)),n=0,o=a.length;while(o>n)G(e,r=a[n++],t[r]);return e},X=function(e,t){return void 0===t?F(e):Q(F(e),t)},Z=function(e){var t=T.call(this,e=k(e,!0));return!(this===J&&n(P,e)&&!n(I,e))&&(!(t||!n(this,e)||!n(P,e)||n(this,N)&&this[N][e])||t)},ee=function(e,t){if(e=_(e),t=k(t,!0),e!==J||!n(P,t)||n(I,t)){var r=$(e,t);return!r||!n(P,t)||n(e,N)&&e[N][t]||(r.enumerable=!0),r}},te=function(e){var t,r=B(_(e)),a=[],o=0;while(r.length>o)n(P,t=r[o++])||t==N||t==s||a.push(t);return a},re=function(e){var t,r=e===J,a=B(r?I:_(e)),o=[],i=0;while(a.length>i)!n(P,t=a[i++])||r&&!n(J,t)||o.push(P[t]);return o};V||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(r){this===J&&t.call(I,r),n(this,N)&&n(this[N],e)&&(this[N][e]=!1),K(this,e,x(1,r))};return o&&W&&K(J,e,{configurable:!0,set:t}),H(e)},l(z[L],"toString",(function(){return this._k})),O.f=ee,C.f=G,r("9093").f=S.f=te,r("52a7").f=Z,R.f=re,o&&!r("2d00")&&l(J,"propertyIsEnumerable",Z,!0),h.f=function(e){return H(m(e))}),i(i.G+i.W+i.F*!V,{Symbol:z});for(var ae="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;ae.length>ne;)m(ae[ne++]);for(var oe=j(m.store),ie=0;oe.length>ie;)d(oe[ie++]);i(i.S+i.F*!V,"Symbol",{for:function(e){return n(q,e+="")?q[e]:q[e]=z(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in q)if(q[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),i(i.S+i.F*!V,"Object",{create:X,defineProperty:G,defineProperties:Q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:re});var le=c((function(){R.f(1)}));i(i.S+i.F*le,"Object",{getOwnPropertySymbols:function(e){return R.f(y(e))}}),D&&i(i.S+i.F*(!V||c((function(){var e=z();return"[null]"!=E([e])||"{}"!=E({a:e})||"{}"!=E(Object(e))}))),"JSON",{stringify:function(e){var t,r,a=[e],n=1;while(arguments.length>n)a.push(arguments[n++]);if(r=t=a[1],(w(t)||void 0!==e)&&!Y(e))return b(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Y(t))return t}),a[1]=t,E.apply(D,a)}}),z[L][A]||r("32e9")(z[L],A,z[L].valueOf),f(z,"Symbol"),f(Math,"Math",!0),f(a.JSON,"JSON",!0)},9093:function(e,t,r){var a=r("ce10"),n=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,n)}},"95d5":function(e,t,r){var a=r("40c3"),n=r("5168")("iterator"),o=r("481b");e.exports=r("584a").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||o.hasOwnProperty(a(t))}},a745:function(e,t,r){e.exports=r("f410")},ac4d:function(e,t,r){r("3a72")("asyncIterator")},b432:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"category-page app-container"},[r("div",{staticClass:"el-child-head"},[r("div",{staticClass:"operate"},[r("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:function(t){return e.openAddDialog()}}},[e._v("新增图书")]),e._v(" "),r("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.batchDel()}}},[e._v("批量删除")])],1),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.query,size:"mini",inline:!0}},[r("el-form-item",[null!=e.allCategory?r("el-select",{attrs:{placeholder:"书籍类型"},model:{value:e.query.category,callback:function(t){e.$set(e.query,"category",t)},expression:"query.category"}},e._l(e.allCategory,(function(e,t){return r("el-option",{key:t,attrs:{label:e.zh_name,value:e.id}})})),1):e._e()],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入书名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")])],1)],1)],1),e._v(" "),r("div",{staticClass:"el-table-box"},[r("el-table",{ref:"multipleTable",attrs:{border:"",size:"medium",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"expand",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{display:"flex"}},[r("el-form",{staticStyle:{width:"50%"},attrs:{size:"mini","label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"中文名称"}},[r("span",[e._v(e._s(t.row.zh_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"英文名称"}},[r("span",[e._v(e._s(t.row.en_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"出版日期"}},[r("span",[e._v(e._s(e.setTime(t.row)))])]),e._v(" "),r("el-form-item",{attrs:{label:"所属分类"}},[r("span",[e._v(e._s(t.row.category.zh_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"总页数"}},[r("span",[e._v(e._s(t.row.total_page))])]),e._v(" "),r("el-form-item",{attrs:{label:"图书描述"}},[r("span",[e._v(e._s(t.row.description))])]),e._v(" "),r("el-form-item",{attrs:{label:"图书特点"}},[r("span",[e._v(e._s(t.row.feature))])]),e._v(" "),r("el-form-item",{attrs:{label:"关于作者"}},[r("span",[e._v(e._s(t.row.about_author))])])],1),e._v(" "),r("el-form",{staticStyle:{width:"50%"},attrs:{size:"mini","label-width":"80px","label-position":"left"}},[r("el-form-item",{attrs:{label:"图书封面"}},[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.cover,fit:"fill"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图书目录"}},e._l(JSON.parse(t.row.catalog),(function(e,t){return r("el-image",{key:t,staticStyle:{width:"100px",height:"100px"},attrs:{src:e,fit:"fill"}})})),1)],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"zh_name",label:"中文名称",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"en_name",label:"英文名称",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"出版日期",formatter:e.setTime,align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"total_page",label:"总页数",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"category.zh_name",label:"所属分类",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"is_hot",label:"热门",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{value:Boolean(t.row.is_hot),"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.handleSwithHot(t.$index,t.row)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"is_new",label:"最新",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{value:Boolean(t.row.is_new),"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.handleSwithNew(t.$index,t.row)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"is_recommend",label:"推荐",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{value:Boolean(t.row.is_recommend),"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return e.handleSwithRecommend(t.$index,t.row)}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.openEditDialog(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("div",{staticClass:"el-table-pagination"},[r("el-pagination",{attrs:{"current-page":1,"page-size":e.query.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.query.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增图书",visible:e.dialogFormVisible,center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{staticStyle:{width:"500px","padding-left":"40px"},attrs:{model:e.resetForm,"label-width":e.formLabelWidth,size:"small ","label-position":"left"}},[r("el-form-item",{attrs:{label:"中文名称"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.resetForm.zh_name,callback:function(t){e.$set(e.resetForm,"zh_name",t)},expression:"resetForm.zh_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"英文名称"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.resetForm.en_name,callback:function(t){e.$set(e.resetForm,"en_name",t)},expression:"resetForm.en_name"}})],1),e._v(" "),null!=e.allCategory?r("el-form-item",{attrs:{label:"活动区域"}},[r("el-select",{attrs:{placeholder:"请选择图书分类"},model:{value:e.resetForm.category,callback:function(t){e.$set(e.resetForm,"category",t)},expression:"resetForm.category"}},e._l(e.allCategory,(function(e,t){return r("el-option",{key:t,attrs:{label:e.zh_name,value:e.id}})})),1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"图书总页数"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.resetForm.total_page,callback:function(t){e.$set(e.resetForm,"total_page",t)},expression:"resetForm.total_page"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出版时间"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.resetForm.create_time,callback:function(t){e.$set(e.resetForm,"create_time",t)},expression:"resetForm.create_time"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图书描述"}},[r("el-input",{attrs:{type:"textarea",rows:"5",autocomplete:"off"},model:{value:e.resetForm.description,callback:function(t){e.$set(e.resetForm,"description",t)},expression:"resetForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图书特征"}},[r("el-input",{attrs:{type:"textarea",rows:"5",autocomplete:"off"},model:{value:e.resetForm.feature,callback:function(t){e.$set(e.resetForm,"feature",t)},expression:"resetForm.feature"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"关于作者"}},[r("el-input",{attrs:{type:"textarea",rows:"5",autocomplete:"off"},model:{value:e.resetForm.about_author,callback:function(t){e.$set(e.resetForm,"about_author",t)},expression:"resetForm.about_author"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"书籍导入"}},[r("el-upload",{ref:"books_upload",staticClass:"upload-demo",attrs:{action:"null","on-change":e.handleBooksChange,"on-remove":e.handleRemoveBooks,multiple:!1,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(!0===e.status.edit?"无需修改请勿操作。只能上传 pdf 文件，且不超过20MB！":"只能上传 pdf 文件，且不超过20MB"))])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"封面图"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"null","show-file-list":!1,"on-change":e.handleCoverChange,"on-remove":e.handleRemoveCover,multiple:!1,"auto-upload":!1}},[e.status.add&&e.upload.coverUrl?r("img",{staticClass:"avatar",attrs:{src:e.upload.coverUrl}}):e.status.edit&&e.upload.coverUrl?r("img",{staticClass:"avatar",attrs:{src:e.upload.coverUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"目录截图"}},[r("el-upload",{attrs:{"list-type":"picture-card",action:"null","show-file-list":!0,"on-change":e.handleCatalogChange,"on-remove":e.handleRemoveCatalog,multiple:!1,"auto-upload":!1,"file-list":e.upload.catalogUrl}},[r("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),e.status.add?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("确 定")]):e._e(),e._v(" "),e.status.edit?r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEdit()}}},[e._v("确 定")]):e._e()],1)],1)],1)},n=[],o=r("a745"),i=r.n(o);function l(e){if(i()(e))return e}var s=r("5d73"),c=r.n(s),u=r("c8bb"),f=r.n(u);function p(e,t){if(f()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var i,l=c()(e);!(a=(i=l.next()).done);a=!0)if(r.push(i.value),t&&r.length===t)break}catch(s){n=!0,o=s}finally{try{a||null==l["return"]||l["return"]()}finally{if(n)throw o}}return r}}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(e,t){return l(e)||p(e,t)||m()}r("6762"),r("7f7f"),r("28a5");var d=r("e265"),v=r.n(d),b=r("a4bb"),g=r.n(b);function w(e,t){if(null==e)return{};var r,a,n={},o=g()(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}function y(e,t){if(null==e)return{};var r,a,n=w(e,t);if(v.a){var o=v()(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}r("ac4d"),r("8a81"),r("ac6a"),r("96cf");var _=r("3b8d"),k=r("ed08"),x=r("5f87"),F={data:function(){return{tableData:null,allCategory:null,status:{add:!1,edit:!1},formLabelWidth:"100px",dialogFormVisible:!1,resetForm:{id:"",zh_name:"中文名字",en_name:"英文名字",cover:"",book:"",description:"描述",feature:"特征",create_time:"出版时间",total_page:"200",catalog:"",about_author:"作者信息",category:""},query:{total:0,limit:20,page:1,category:"",name:""},booksIdArr:[],upload:{book:new FormData,cover:new FormData,coverUrl:null,catalog:new FormData,catalogUrl:[]}}},created:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getBooks(),e.next=3,this.$api.bookmanage.category();case 3:t=e.sent,r=t.result,this.allCategory=r;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handleSwithHot:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.is_hot=1===r.is_hot?0:1,e.next=3,this.$api.bookmanage.editBooks(r.id,r);case 3:this.getBooks();case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),handleSwithNew:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.is_new=1===r.is_new?0:1,e.next=3,this.$api.bookmanage.editBooks(r.id,r);case 3:this.getBooks();case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),handleSwithRecommend:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.is_recommend=1===r.is_recommend?0:1,e.next=3,this.$api.bookmanage.editBooks(r.id,r);case 3:this.getBooks();case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.query.limit=e,this.getBooks()},handleCurrentChange:function(e){this.query.page=e,this.getBooks()},resetFormData:function(){this.upload.book=new FormData,this.upload.cover=new FormData,this.upload.catalog=new FormData,this.upload.catalogUrl=[],this.upload.coverUrl=null},openAddDialog:function(){this.status.add=!0,this.status.edit=!1,this.resetForm=Object(x["c"])(this.resetForm),this.resetFormData(),this.resetForm.catalogUrl=[{name:"catalog",url:null}],this.dialogFormVisible=!0},openEditDialog:function(e,t){this.status.add=!1,this.status.edit=!0,this.resetForm=Object(x["c"])(this.resetForm,t),this.resetFormData(),this.upload.coverUrl=this.resetForm.cover,this.resetForm.catalog=JSON.parse(this.resetForm.catalog);var r=!0,a=!1,n=void 0;try{for(var o,i=this.resetForm.catalog[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value;this.upload.catalogUrl.push({name:"catalog",url:l})}}catch(s){a=!0,n=s}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}this.resetForm.catalog=JSON.stringify(this.resetForm.catalog),this.resetForm.category=t.category.zh_name,this.dialogFormVisible=!0},handleAdd:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,o,i,l,s,c,u,f,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.bookmanage.cover(this.upload.cover);case 2:return t=e.sent,r=t.coverUrl,e.next=6,this.$api.bookmanage.book(this.upload.book);case 6:for(a=e.sent,n=a.bookUrl,o=!0,i=!1,l=void 0,e.prev=11,s=this.upload.catalogUrl[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)u=c.value,this.upload.catalog.append("catalog",u.raw);e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),i=!0,l=e.t0;case 19:e.prev=19,e.prev=20,o||null==s.return||s.return();case 22:if(e.prev=22,!i){e.next=25;break}throw l;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.next=29,this.$api.bookmanage.catalog(this.upload.catalog);case 29:return f=e.sent,this.resetForm.cover=r,this.resetForm.book=n,this.resetForm.catalog=JSON.stringify(f),p=this.resetForm,p.id,m=y(p,["id"]),e.next=36,this.$api.bookmanage.addBooks(m);case 36:this.dialogFormVisible=!1,this.getBooks();case 38:case"end":return e.stop()}}),e,this,[[11,15,19,27],[20,,22,26]])})));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,o,i,l,s,c,u,f,p,m,h,d,v,b,g,w,_,k,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.upload.cover.has("cover")){e.next=6;break}return e.next=3,this.$api.bookmanage.cover(this.upload.cover);case 3:t=e.sent,r=t.coverUrl,this.resetForm.cover=r;case 6:for(a=[],n=!0,o=!1,i=void 0,e.prev=10,l=this.upload.catalogUrl[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)c=s.value,c.raw?this.upload.catalog.append("catalog",c.raw):a.push(c.url);e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](10),o=!0,i=e.t0;case 18:e.prev=18,e.prev=19,n||null==l.return||l.return();case 21:if(e.prev=21,!o){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:if(!this.upload.catalog.has("catalog")){e.next=34;break}return e.next=29,this.$api.bookmanage.catalog(this.upload.catalog);case 29:u=e.sent,f=a.concat(u),this.resetForm.catalog=JSON.stringify(f),e.next=35;break;case 34:this.resetForm.catalog=JSON.stringify(a);case 35:if(!this.upload.book.has("book")){e.next=41;break}return e.next=38,this.$api.bookmanage.book(this.upload.book);case 38:p=e.sent,m=p.bookUrl,this.resetForm.book=m;case 41:h=this.resetForm,d=h.id,v=y(h,["id"]),b=!0,g=!1,w=void 0,e.prev=45,_=this.allCategory[Symbol.iterator]();case 47:if(b=(k=_.next()).done){e.next=55;break}if(x=k.value,x.zh_name!==v.category){e.next=52;break}return v.category=x.id,e.abrupt("break",55);case 52:b=!0,e.next=47;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e["catch"](45),g=!0,w=e.t1;case 61:e.prev=61,e.prev=62,b||null==_.return||_.return();case 64:if(e.prev=64,!g){e.next=67;break}throw w;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.next=71,this.$api.bookmanage.editBooks(d,v);case 71:this.dialogFormVisible=!1,this.getBooks();case 73:case"end":return e.stop()}}),e,this,[[10,14,18,26],[19,,21,25],[45,57,61,69],[62,,64,68]])})));function t(){return e.apply(this,arguments)}return t}(),handleSearch:function(){this.getBooks()},getBooks:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.query,t.total,r=y(t,["total"]),e.next=3,this.$api.bookmanage.books(r);case 3:a=e.sent,n=a.data,o=a.total,this.tableData=n,this.query.total=o;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setTime:function(e,t){return Object(k["c"])(e.create_time)},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.booksIdArr=[];var t=!0,r=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;this.booksIdArr.push(i.id)}}catch(l){r=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(r)throw a}}},batchDel:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.bookmanage.batchDelBooks(t.booksIdArr);case 2:t.getBooks(),t.$message({type:"success",message:"删除成功!"});case 4:case"end":return e.stop()}}),e)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleBooksChange:function(e,t){var r=20971520,a=["pdf"],n=e.name.split(".");e.size>r?(this.$message({message:"文件大小超过限制，文件最大为20MB!",type:"warning"}),this.handleRemoveBooks(e,t,"warn")):a.includes(n[n.length-1])?(this.upload.book=new FormData,this.upload.book.append("book",e.raw),this.handleRemoveBooks(e,t)):(this.$message({message:"文件格式不符，只能上传pdf文件!",type:"warning"}),this.handleRemoveBooks(e,t,"warn"))},handleRemoveBooks:function(e,t,r){r?t=t.filter((function(r,a){return r.uid===e.uid&&t.splice(a,1),r.uid!==e.uid})):t.length>1&&t.splice(0,1)},handleCoverChange:function(e,t){var r=314572.8,a=["jpg","png"],n=e.name.split(".");e.size>r?(this.$message({message:"文件大小超过限制，文件最大为300KB!",type:"warning"}),this.handleRemoveCover(e,t,"warn")):a.includes(n[n.length-1])?(this.upload.cover=new FormData,this.upload.cover.append("cover",e.raw),void 0!==window.createObjectURL?this.upload.coverUrl=window.createObjectURL(e.raw):void 0!==window.webkitURL?this.upload.coverUrl=window.webkitURL.createObjectURL(e.raw):void 0!==window.URL&&(this.upload.coverUrl=window.URL.createObjectURL(e.raw)),this.handleRemoveCover(e,t)):(this.$message({message:"文件格式不符，只能上传 jpg/png 文件!",type:"warning"}),this.handleRemoveCover(e,t,"warn"))},handleRemoveCover:function(e,t,r){r?t=t.filter((function(r,a){return r.uid===e.uid&&t.splice(a,1),r.uid!==e.uid})):t.length>1&&t.splice(0,1)},handleCatalogChange:function(e,t){void 0!==window.createObjectURL?this.upload.catalogUrl.push({name:"catalog",url:window.createObjectURL(e.raw),raw:e.raw}):void 0!==window.webkitURL?this.upload.catalogUrl.push({name:"catalog",url:window.webkitURL.createObjectURL(e.raw),raw:e.raw}):void 0!==window.URL&&this.upload.catalogUrl.push({name:"catalog",url:window.URL.createObjectURL(e.raw),raw:e.raw})},handleRemoveCatalog:function(e,t){var r=!0,a=!1,n=void 0;try{for(var o,i=this.upload.catalogUrl.entries()[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=h(o.value,2),s=l[0],c=l[1];e.uid===c.uid&&this.upload.catalogUrl.splice(s,1)}}catch(u){a=!0,n=u}finally{try{r||null==i.return||i.return()}finally{if(a)throw n}}},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,r.$api.bookmanage.delBooks(a);case 3:r.getBooks(),r.$message({type:"success",message:"删除成功!"});case 5:case"end":return e.stop()}}),e)})))).catch((function(){r.$message({type:"info",message:"已取消删除"})}))}}},S=F,O=(r("7d7e"),r("2877")),R=Object(O["a"])(S,a,n,!1,null,null,null);t["default"]=R.exports},c8bb:function(e,t,r){e.exports=r("54a1")},d1e6:function(e,t,r){},d4c0:function(e,t,r){var a=r("0d58"),n=r("2621"),o=r("52a7");e.exports=function(e){var t=a(e),r=n.f;if(r){var i,l=r(e),s=o.f,c=0;while(l.length>c)s.call(e,i=l[c++])&&t.push(i)}return t}},f410:function(e,t,r){r("1af6"),e.exports=r("584a").Array.isArray}}]);